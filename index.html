<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GlobeQuest AI ‚Äì Smart Travel Planner üåç</title>

  <!-- Tailwind + Markdown + Icons -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>

  <style>
    body {
      background: linear-gradient(135deg, #fef3c7 0%, #dbeafe 40%, #ede9fe 100%);
      font-family: 'Inter', sans-serif;
      overflow-x: hidden;
    }

    .glass {
      background: rgba(255, 255, 255, 0.75);
      backdrop-filter: blur(20px);
      box-shadow: 0 8px 40px rgba(59, 130, 246, 0.25);
    }

    .gradient-text {
      background: linear-gradient(to right, #2563eb, #9333ea, #f43f5e);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .btn-modern {
      background: linear-gradient(90deg, #2563eb, #9333ea);
      box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
      transition: all 0.3s ease;
    }

    .btn-modern:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 25px rgba(99, 102, 241, 0.6);
    }

    .scrollbar::-webkit-scrollbar {
      width: 8px;
    }

    .scrollbar::-webkit-scrollbar-thumb {
      background: linear-gradient(to bottom, #6366f1, #9333ea);
      border-radius: 8px;
    }
  </style>
</head>

<body class="min-h-screen flex items-center justify-center p-6">
  <div class="glass rounded-3xl p-8 w-full max-w-7xl flex flex-col md:flex-row gap-8 border border-gray-200">

    <!-- üåè Left Panel -->
    <div class="md:w-1/2 w-full flex flex-col justify-between p-4">
      <div>
        <div class="flex justify-between items-center mb-4">
          <h1 class="text-5xl font-extrabold gradient-text flex items-center gap-2">
            <i data-lucide="plane" class="w-9 h-9 text-blue-500"></i> TripVerse
          </h1>

          <!-- üåê Language Selector -->
          <select id="languageSelect" class="p-2 rounded-lg border border-gray-300 bg-white text-gray-700 shadow-sm">
            <option value="en" selected>English</option>
            <option value="hi">Hindi</option>
            <option value="fr">French</option>
            <option value="es">Spanish</option>
            <option value="ta">Tamil</option>
            <option value="de">German</option>
            <option value="zh">Chinese</option>
          </select>
        </div>

        <p class="text-gray-700 text-lg mb-8">
          ‚úà Your Smart AI Travel Planner ‚Äì Personalized Trips Based on Location & Budget in ‚Çπ
        </p>

        <form id="travel-form" class="flex flex-col gap-4">
          <!-- üìç Location -->
          <div>
            <label for="location" class="font-semibold text-gray-700 text-lg flex items-center gap-2">
              <i data-lucide="map-pin" class="w-5 h-5 text-indigo-500"></i>
              Where do you want to go?
            </label>
            <input id="location" type="text" placeholder="e.g., Goa, Paris, Maldives, or Manali"
              class="p-3 border border-gray-300 rounded-xl bg-gray-50 focus:ring-2 focus:ring-indigo-500 w-full shadow-sm" />
          </div>

          <!-- üí∞ Budget -->
          <div>
            <label for="budget" class="font-semibold text-gray-700 text-lg flex items-center gap-2">
              <i data-lucide="wallet" class="w-5 h-5 text-green-500"></i>
              What‚Äôs your travel budget (in ‚Çπ INR)?
            </label>
            <div class="flex items-center gap-2">
              <span class="font-semibold text-lg text-gray-600">‚Çπ</span>
              <input id="budget" type="number" placeholder="e.g., 50000"
                class="p-3 border border-gray-300 rounded-xl bg-gray-50 focus:ring-2 focus:ring-indigo-500 w-full shadow-sm" />
            </div>
            <p class="text-sm text-gray-500 mt-1">Example: ‚Çπ50,000 for domestic or ‚Çπ2,00,000 for international trips.</p>
          </div>

          <!-- üß≥ Trip Description -->
          <div>
            <label for="prompt" class="font-semibold text-gray-700 text-lg flex items-center gap-2">
              <i data-lucide="map" class="w-5 h-5 text-indigo-500"></i>
              Describe Your Dream Trip üåÖ
            </label>
            <textarea id="prompt"
              placeholder="e.g., 6-day honeymoon trip in December with beaches, adventure, and luxury stay"
              rows="5"
              class="p-4 border border-gray-300 rounded-xl bg-gray-50 focus:ring-2 focus:ring-indigo-500 resize-none text-gray-800 shadow-sm"></textarea>
          </div>

          <!-- üöÄ Button -->
          <button type="submit"
            class="btn-modern text-white py-3 rounded-xl text-base font-semibold flex items-center justify-center gap-2">
            <i data-lucide="sparkles" class="w-5 h-5"></i> Generate My Itinerary
          </button>
        </form>
      </div>

      <div class="text-sm text-gray-600 mt-6 border-t pt-3">
        <i data-lucide="info" class="inline w-4 h-4 mr-1 text-indigo-500"></i>
        Tip: Mention season, number of travelers, and preferred activities for better results.
      </div>
    </div>

    <!-- üó∫ Right Panel -->
    <div class="md:w-1/2 w-full bg-white/70 rounded-2xl border border-gray-200 p-6 shadow-inner relative">
      <div id="loader" class="hidden text-center text-indigo-600 font-semibold mt-10">
        <i data-lucide="loader" class="animate-spin inline w-6 h-6 mr-2"></i>
        Crafting your journey...
      </div>

      <div id="error" class="hidden bg-red-100 border border-red-300 text-red-800 p-3 rounded-xl text-center font-medium"></div>

      <div id="output" class="hidden overflow-auto max-h-[500px] fade-in scrollbar"></div>

      <div id="placeholder" class="text-center text-gray-400 mt-16 italic">
        <i data-lucide="globe" class="w-10 h-10 mx-auto mb-3 text-gray-400"></i>
        Your personalized itinerary will appear here soon... üå¥
      </div>
    </div>
  </div>

  <!-- üß† AI Script -->
  <script>
    lucide.createIcons();

    const apiKey = "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"; // Replace safely
    const baseURL = "https://openrouter.ai/api/v1";
    const referer = "http://localhost";
    const title = "GlobeQuest AI";

    const form = document.getElementById("travel-form");
    const locationInput = document.getElementById("location");
    const budgetInput = document.getElementById("budget");
    const promptInput = document.getElementById("prompt");
    const outputDiv = document.getElementById("output");
    const placeholder = document.getElementById("placeholder");
    const loader = document.getElementById("loader");
    const errorBox = document.getElementById("error");
    const languageSelect = document.getElementById("languageSelect");

    let lastItinerary = "";

    async function getTripPlan(fullPrompt) {
      const response = await fetch(`${baseURL}/chat/completions`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${apiKey}`,
          "HTTP-Referer": referer,
          "X-Title": title,
        },
        body: JSON.stringify({
          model: "openai/gpt-4o-mini",
          messages: [
            {
              role: "system",
              content: `You are GlobeQuest AI, a premium Indian travel consultant.
              Generate a day-wise travel itinerary in Markdown based on user's location, description, and INR budget.
              Use Indian currency (‚Çπ), include estimated daily costs, accommodation, transport, food, and attractions.
              Suggest 2‚Äì3 hotel options within budget and include emojis and Google Maps links.`
            },
            { role: "user", content: fullPrompt }
          ]
        })
      });

      const data = await response.json();
      return data.choices?.[0]?.message?.content || "";
    }

    async function translateText(text, targetLang) {
      if (targetLang === "en") return text;

      const response = await fetch(`${baseURL}/chat/completions`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${apiKey}`,
        },
        body: JSON.stringify({
          model: "openai/gpt-4o-mini",
          messages: [
            {
              role: "system",
              content: `Translate this text into ${targetLang}, keeping emojis, currency (‚Çπ), and formatting.`
            },
            { role: "user", content: text }
          ]
        })
      });

      const data = await response.json();
      return data.choices?.[0]?.message?.content || text;
    }

    form.addEventListener("submit", async (e) => {
      e.preventDefault();

      const location = locationInput.value.trim();
      const budget = budgetInput.value.trim();
      const description = promptInput.value.trim();

      if (!location || !budget || !description) {
        alert("Please fill in all fields: location, budget (‚Çπ), and trip description!");
        return;
      }

      const combinedPrompt = `
        Plan a personalized trip to ${location}.
        Total budget: ‚Çπ${budget} INR.
        Trip details: ${description}.
        Include cost breakdown in rupees (‚Çπ) for hotels, food, and activities.
      `;

      loader.classList.remove("hidden");
      errorBox.classList.add("hidden");
      placeholder.classList.add("hidden");
      outputDiv.classList.add("hidden");

      try {
        const itinerary = await getTripPlan(combinedPrompt);
        lastItinerary = itinerary;
        const translated = await translateText(itinerary, languageSelect.value);

        outputDiv.innerHTML = `<div class="prose prose-sm sm:prose-lg max-w-none text-gray-800">${marked.parse(translated)}</div>`;
        outputDiv.classList.remove("hidden");
        lucide.createIcons();
      } catch (error) {
        errorBox.textContent = "‚ùå Failed to generate itinerary: " + error.message;
        errorBox.classList.remove("hidden");
      } finally {
        loader.classList.add("hidden");
      }
    });

    languageSelect.addEventListener("change", async () => {
      if (!lastItinerary) return;
      loader.classList.remove("hidden");
      const translated = await translateText(lastItinerary, languageSelect.value);
      outputDiv.innerHTML = `<div class="prose prose-sm sm:prose-lg max-w-none text-gray-800">${marked.parse(translated)}</div>`;
      loader.classList.add("hidden");
      lucide.createIcons();
    });
  </script>
</body>
</html>
